# Playbox Deep Learning Project Template

## プロジェクト概要

このテンプレートでは、Playboxのディープラーニングプロジェクトのテンプレートを提供します。
例えば、**ボール検出**だとか**ピッチのローカリゼーション**といったタスクを対象としたテンプレです。

## 特徴

- **依存関係管理**: [uv](https://astral.sh/blog/uv) を使用した効率的なパッケージ管理。

## 使い方

以下の手順に従ってプロジェクトをセットアップしてください。

### ステップ 1: リポジトリの作成

GitHub で新しいリポジトリを作成し、このテンプレートを選択してください。

### ステップ 2: リポジトリのクローン

```bash
git clone <リポジトリのURL>
cd <プロジェクトディレクトリ>
```

### ステップ 3: プロジェクト名の変更

`pyproject.toml` ファイルを開き、プロジェクト名やその他の詳細を更新してください。

### ステップ 4: 依存関係のインストール

```bash
uv sync
```

これにより、本テンプレを使った仮想環境が作られます。同時に、playbox-utils パッケージがインストールされます。

### ステップ 4: コードの実行

```bash
uv run python xxx.py
```

## Tips

### プロジェクト構造

特に統一することは求めてませんが、こんな感じだと分かりやすいです。
```
project_name/
├── data/                # playboxサーバーの/share下にシンボリックリンクを作成するのが推奨
├── notebooks/
│   └── xxx.ipynb        # ノートブックファイル
├── src/
│   ├── train.py/        # トレーニング用スクリプト
│   └── ...              # その他の関連コード
├── tests/
│   └── test_xxx.py      # 簡単なテスト
├── configs/
│   └── xxx.yaml         # 設定ファイル
├── setup.py             # セットアップスクリプト
├── pyproject.toml       # uv用設定ファイル
├── Makefile             # 便利なコマンドを含むMakefile（例: `make data`や`make train`）
└── README.md            # プロジェクトの説明書
```


### ドキュメンテーション

#### READMEはしっかり書きましょう！
環境構築の手順やコードの実行方法は最低限記載してください。手法の説明や関連リンク（Notionのリンクでも構いません）があると助かります。

#### Docstringは分かる程度で大丈夫です！
Docstringは一行程度で構いません。型ヒントも好みで大丈夫です。私自身、これに力を入れすぎて開発速度が落ちた経験が多々ありますので、プロダクション用のコード（Playbox上で動く本番用のコード）でない限り、メンテナンスが面倒になるので適当で大丈夫です。

### 大きいファイル（データセット・モデル）の置き場所

**playbox-server-1**で開発を行う場合、可能な限り`/home/share/data`にファイルを配置し、シンボリックリンク（symlink）を作成してください。例えば、`ball_detection`プロジェクトの場合、ディレクトリ構造は以下のようになるかもしれません：

```
/home/share/data
├── ball_detection
│   ├── data
│   │   ├── external       # 外部ソースからのデータ
│   │   ├── interim        # 変換中間データ
│   │   ├── processed      # モデリング用の最終データセット
│   │   └── raw            # 元の不変データ
│   ├── weights
│   ├── outputs
```

このようにディレクトリを構築し、シンボリックリンクを作成することで、プロジェクト内でのデータ管理が容易になります。ただし、共有場所となるため、不必要なファイルを増やさないよう注意してください。


### その他、意識してほしいこと

#### なるべく[Python 3.9 以上](https://www.python.org/downloads/)を使う

Pythonのバージョンは、できるだけ新しいものを使用してください。
2024年末には3.8のサポートが終了し、2025年10月には3.9のサポートも終了する予定です。
詳細は[Status of Python versions](https://devguide.python.org/versions/)を参照してください。

#### なるべく[uv](https://astral.sh/blog/uv) を使う
可能な限り[uv](https://astral.sh/blog/uv)を使用してください。既存のコードベースがPoetryやcondaを使用しており、uvへの移行が難しい場合はそのままでも構いませんが、何らかの方法でパッケージを管理するようにしてください。これにより、[It works on my machine](https://dylanbeattie.net/2017/04/27/it-works-on-my-machine.html)問題を防ぐことができます。

#### アトムがコードを実行してツイートできるようにする
Playboxの機械学習コードは、画像や映像を入力し、可視化された結果を出力することが多いです。
ツイート可能にすることは、単に動作するだけでなく、環境構築が整い、再現性のあるコードベースと最低限のドキュメンテーションがあることを示しています。
